<!DOCTYPE html>
<html>
<head>
    <title>✅ Test Final SegurBot</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            margin: 0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 12px;
            color: #333;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        .success { 
            background: #d4edda; 
            border: 1px solid #c3e6cb; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 15px 0; 
        }
        .btn { 
            background: #28a745; 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 10px; 
            font-size: 16px;
        }
        .btn:hover { background: #1e7e34; }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center;">🎉 ¡SegurBot Widget Funcionando!</h1>
        
        <div class="success">
            <h3>✅ ¡Ya funciona!</h3>
            <p>Deberías ver un botón flotante azul en la esquina inferior derecha con:</p>
            <ul>
                <li>🔵 Fondo azul oscuro (#03070f)</li>
                <li>💫 Borde azul claro con efecto glow</li>
                <li>💬 Icono de chat en el centro</li>
                <li>✨ Efecto hover que cambia el tamaño</li>
            </ul>
        </div>

        <div style="text-align: center; margin: 30px 0;">
            <button class="btn" onclick="testWidget()">🧪 Probar Chat</button>
            <button class="btn" onclick="checkStatus()">📊 Ver Estado</button>
        </div>

        <div id="status" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;"></div>

        <div style="background: #e9ecef; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>🚀 Para usar en tu sitio web:</h3>
            <p>Solo agrega este código antes del <code>&lt;/body&gt;</code>:</p>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">&lt;script 
  src="https://chatbotfrontend-tau.vercel.app/segurbot-widget.umd.js" 
  data-api-url="https://tu-backend.com/api/chat" 
  data-title="Mi SegurBot" 
  data-message="¡Hola! ¿En qué puedo ayudarte?"
&gt;&lt;/script&gt;</pre>
        </div>
    </div>

    <script>
        function testWidget() {
            const button = document.querySelector('[aria-label*="chat"]');
            if (button) {
                button.click();
                console.log('✅ Chat abierto');
            } else {
                alert('❌ Botón de chat no encontrado');
            }
        }

        function checkStatus() {
            const statusDiv = document.getElementById('status');
            let html = '<h4>📊 Estado del Widget:</h4>';

            const container = document.getElementById('segurbot-widget');
            const button = document.querySelector('[aria-label*="chat"]');
            
            if (container) {
                html += '<p>✅ Container: Encontrado</p>';
            } else {
                html += '<p>❌ Container: No encontrado</p>';
            }

            if (button) {
                const styles = window.getComputedStyle(button);
                html += '<p>✅ Botón: Encontrado</p>';
                html += `<p>📍 Posición: ${styles.position}</p>`;
                html += `<p>👁️ Visible: ${styles.visibility === 'visible' && styles.display !== 'none'}</p>`;
                html += `<p>🎨 Background: ${styles.backgroundColor}</p>`;
                html += `<p>🔗 Border: ${styles.border}</p>`;
            } else {
                html += '<p>❌ Botón: No encontrado</p>';
            }

            statusDiv.innerHTML = html;
        }

        // Auto-check después de cargar
        setTimeout(checkStatus, 2000);
    </script>

    <!-- Widget SegurBot -->
    <script 
        src="./dist/segurbot-widget.umd.js" 
        data-api-url="http://localhost:8080/api/chat" 
        data-title="SegurBot Final" 
        data-message="¡Hola! Soy SegurBot. ¿En qué puedo ayudarte?"
        data-debug="false"
    ></script>
</body>
</html>
