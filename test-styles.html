<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SegurBot Widget - Test de Estilos</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .test-content {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        .status {
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
        }
        .debug-info {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
        }
        button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <div class="test-content">
        <h1>ü§ñ SegurBot Widget - Test de Estilos Completos</h1>
        
        <div class="status">
            ‚úÖ Widget cargado desde Vercel con estilos Tailwind completos
        </div>
        
        <p>Esta p√°gina prueba el widget SegurBot con todos los estilos de Tailwind CSS incluidos.</p>
        <p>El widget deber√≠a mostrar:</p>
        <ul>
            <li>Bot√≥n flotante con el color azul oscuro y borde azul claro</li>
            <li>Ventana de chat con header azul y t√≠tulo centrado</li>
            <li>Input de chat con fondo oscuro y placeholder correcto</li>
            <li>Mensajes con colores y espaciado apropiados</li>
            <li>Todos los efectos hover y transiciones</li>
        </ul>
        
        <div style="text-align: center; margin: 30px 0;">
            <button onclick="testWidget()">üîß Test Widget Functions</button>
            <button onclick="inspectStyles()">üé® Inspect Styles</button>
            <button onclick="toggleDebug()">üìã Toggle Debug</button>
        </div>

        <div id="debug-output" class="debug-info" style="display: none;">
            <strong>Debug Information:</strong><br>
            <div id="debug-content"></div>
        </div>
    </div>

    <!-- SegurBot Widget Script -->
    <script 
        src="https://botfrontend-navy.vercel.app/segurbot-widget.umd.js"
        data-api-url="https://chatbot-backend-production-4875.up.railway.app/api/chat"
        data-title="SegurBot Test"
        data-message="¬°Hola! Soy SegurBot con estilos completos. ¬øEn qu√© puedo ayudarte?"
        data-position="bottom-right"
        data-auto-open="false"
        data-debug="true">
    </script>

    <script>
        let debugMode = false;

        function testWidget() {
            if (window.segurBotWidget) {
                console.log('üîß Testing widget functions...');
                
                // Test open/close
                window.segurBotWidget.toggle();
                
                setTimeout(() => {
                    window.segurBotWidget.toggle();
                }, 2000);
                
                updateDebug('Widget toggle test completed');
            } else {
                alert('‚ùå Widget not found! Check console for errors.');
            }
        }

        function inspectStyles() {
            const container = document.getElementById('segurbot-widget');
            const button = container?.querySelector('[aria-label*="chat"]');
            const chatWindow = container?.querySelector('.fixed.bottom-25');
            
            if (button) {
                const buttonStyles = window.getComputedStyle(button);
                const info = `
Button Styles:
- Background: ${buttonStyles.backgroundColor}
- Color: ${buttonStyles.color}
- Border: ${buttonStyles.border}
- Position: ${buttonStyles.position}
- Z-index: ${buttonStyles.zIndex}
- Border-radius: ${buttonStyles.borderRadius}
`;
                updateDebug(info);
            }
            
            if (chatWindow) {
                const windowStyles = window.getComputedStyle(chatWindow);
                const windowInfo = `
Chat Window Styles:
- Background: ${windowStyles.backgroundColor}
- Position: ${windowStyles.position}
- Bottom: ${windowStyles.bottom}
- Right: ${windowStyles.right}
- Z-index: ${windowStyles.zIndex}
`;
                updateDebug(windowInfo);
            }
        }

        function toggleDebug() {
            debugMode = !debugMode;
            const debugDiv = document.getElementById('debug-output');
            debugDiv.style.display = debugMode ? 'block' : 'none';
            
            if (debugMode) {
                inspectWidget();
            }
        }

        function inspectWidget() {
            const container = document.getElementById('segurbot-widget');
            const stylesEl = document.getElementById('segurbot-widget-styles');
            
            let info = `
Widget Container: ${container ? '‚úÖ Found' : '‚ùå Not found'}
Injected Styles: ${stylesEl ? '‚úÖ Found' : '‚ùå Not found'}
`;
            
            if (container) {
                info += `Container Children: ${container.children.length}\n`;
                const button = container.querySelector('[aria-label*="chat"]');
                info += `Floating Button: ${button ? '‚úÖ Found' : '‚ùå Not found'}\n`;
                
                if (button) {
                    const styles = window.getComputedStyle(button);
                    info += `Button Visible: ${styles.display !== 'none' && styles.visibility !== 'hidden' && parseFloat(styles.opacity) > 0 ? '‚úÖ Yes' : '‚ùå No'}\n`;
                }
            }
            
            updateDebug(info);
        }

        function updateDebug(content) {
            const debugContent = document.getElementById('debug-content');
            if (debugContent) {
                debugContent.innerHTML = content.replace(/\n/g, '<br>');
            }
        }

        // Auto-inspect after widget loads
        setTimeout(() => {
            console.log('üîç Auto-inspecting widget after load...');
            inspectWidget();
        }, 2000);

        // Monitor for widget initialization
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    const container = document.getElementById('segurbot-widget');
                    if (container && container.children.length > 0) {
                        console.log('‚úÖ Widget container populated');
                        if (debugMode) {
                            setTimeout(inspectWidget, 500);
                        }
                    }
                }
            });
        });

        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
    </script>
</body>
</html>
